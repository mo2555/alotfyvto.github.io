import{FaceTracker as C,PoseTracker as J,HandTracker as V}from'@geenee/bodytracking';import{Processor as U,Engine as E,VideoCapture as q}from'@geenee/armature';var Y=Object['defineProperty'],r=(s,t,I)=>t in s?Y(s,t,{'enumerable':!0x0,'configurable':!0x0,'writable':!0x0,'value':I}):s[t]=I,N=(s,t,I)=>(r(s,typeof t!='symbol'?t+'':t,I),I);class Q extends U{constructor(){super(...arguments),N(this,'faceTracker',new C()),N(this,'cameraAngleBase',0xa/0xb4*Math['PI']);}async['init'](t,I,j){return await this['faceTracker']['init'](t['token'],t['root'],t['cache'],t['highp']),await this['faceTracker']['prepare'](),super['init'](t,I,j);}['reset'](){this['faceTracker']['reset'](),super['reset']();}['dispose'](){this['faceTracker']['dispose']();}async['process'](s,t){return{'faces':(await this['faceTracker']['process'](s,t))['map'](I=>{const j=I&&this['params']['transform']?this['faceTracker']['align'](I['keypoints']):void 0x0,S=j&&this['params']['metric']?this['faceTracker']['metricPoints']():void 0x0,O=j&&this['params']['backproj']?this['faceTracker']['backprojPoints']():void 0x0;return{'mesh':I,'transform':j,'metric':S,'backproj':O};})};}['setupVideo'](s,t){super['setupVideo'](s,t),this['cameraAngle']=this['cameraRatio']>=0x1?this['cameraAngleBase']:0x2*Math['atan'](Math['tan'](0.5*this['cameraAngleBase'])/this['cameraRatio']),this['faceTracker']['setCamera'](this['cameraAngle'],this['cameraRatio'],0x1),this['faceTracker']['reset']();}}class D extends E{constructor(s,t=q){super(Q,s,t);}}var c=Object['defineProperty'],i=(s,t,I)=>t in s?c(s,t,{'enumerable':!0x0,'configurable':!0x0,'writable':!0x0,'value':I}):s[t]=I,M=(s,t,I)=>(i(s,typeof t!='symbol'?t+'':t,I),I);class F extends U{constructor(){super(),M(this,'poseTracker',new J()),M(this,'cameraAngleBase',0xf/0xb4*Math['PI']);const s=/iPhone|iPad|iPod/i['test'](navigator['userAgent']);this['optimalSize']=s?0x200:0x400;}async['init'](t,I,j){return await this['poseTracker']['init'](t['token'],t['root'],t['cache'],t['mask']),await this['poseTracker']['prepare'](),super['init'](t,I,j);}['reset'](){return this['poseTracker']['reset'](),super['reset']();}['dispose'](){this['poseTracker']['dispose']();}async['process'](s,t){return{'poses':(await this['poseTracker']['process'](s,t))['map'](I=>({'points':a['reduce']((j,S,O)=>(j[S]=I['keypoints'][O],j),{}),'score':I['score'],'mask':I['mask'],'timestamp':t,'debug':I['debug']}))};}['setupVideo'](s,t){super['setupVideo'](s,t),this['cameraAngle']=this['cameraRatio']>=0x1?this['cameraAngleBase']:0x2*Math['atan'](Math['tan'](0.5*this['cameraAngleBase'])/this['cameraRatio']),this['poseTracker']['setCamera'](this['cameraAngle'],this['cameraRatio'],0x1),this['poseTracker']['reset']();}}class K extends E{constructor(s,t=q){super(F,s,t);}}const a=['nose','eyeInnerL','eyeL','eyeOutterL','eyeInnerR','eyeR','eyeOutterR','earL','earR','mouthL','mouthR','shoulderL','shoulderR','elbowL','elbowR','wristL','wristR','pinkyL','pinkyR','indexL','indexR','thumbL','thumbR','hipL','hipR','kneeL','kneeR','ankleL','ankleR','heelL','heelR','footIndexL','footIndexR'];var Z=Object['defineProperty'],H=(s,t,I)=>t in s?Z(s,t,{'enumerable':!0x0,'configurable':!0x0,'writable':!0x0,'value':I}):s[t]=I,G=(s,t,I)=>(H(s,typeof t!='symbol'?t+'':t,I),I);class W extends U{constructor(){super(...arguments),G(this,'handTracker',new V()),G(this,'cameraAngleBase',0xa/0xb4*Math['PI']);}async['init'](t,I,j){return await this['handTracker']['init'](t['token'],t['root'],t['cache']),await this['handTracker']['prepare'](),super['init'](t,I,j);}['reset'](){this['handTracker']['reset'](),super['reset']();}['dispose'](){this['handTracker']['dispose']();}async['process'](s,t){return{'hands':(await this['handTracker']['process'](s,t))['map'](I=>({'points':I['keypoints'],'score':I['score'],'handedness':I['handedness'],'wrist':I['wrist']}))};}['setupVideo'](s,t){super['setupVideo'](s,t),this['cameraAngle']=this['cameraRatio']>=0x1?this['cameraAngleBase']:0x2*Math['atan'](Math['tan'](0.5*this['cameraAngleBase'])/this['cameraRatio']),this['handTracker']['setCamera'](this['cameraAngle'],this['cameraRatio'],0x1),this['handTracker']['reset']();}}class z extends E{constructor(s,t=q){super(W,s,t);}}export{D as FaceEngine,Q as FaceProcessor,z as HandEngine,W as HandProcessor,K as PoseEngine,F as PoseProcessor};
